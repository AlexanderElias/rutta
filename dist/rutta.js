!function(){"use strict";function e(){return!!("undefined"!=typeof window&&"onhashchange"in window)}function t(e){return e=e.toString(),e=e.trim(),e=e.replace(/\/$/,""),e=e.replace(/^\//,"")}var r=2,o=3;window.Rutta={HASH:r,HISTORY:o,root:"/",routes:[],mode:e()?o:r,setup:function(e){var n=this;return e=e||{},e.root&&(n.root="/"+t(e.root)+"/"),e.mode&&("Number"===e.mode.constructor.name?n.mode=e.mode:"String"===e.mode.constructor.name&&(n.mode="history"===e.mode.toLowerCase()?o:r)),n},fragment:function(){
var e=this,r="",n=null;return e.mode===o?(r=decodeURI(location.pathname+location.search),r=t(r),r=r.replace(/\?(.*)$/,""),r="/"!==e.root?r.replace(e.root,""):r):(n=window.location.href.match(/#(.*)$/),r=n?n[1]:""),r=t(r)},add:function(e){var t=this;if("Object"===e.constructor.name)t.routes.push(e);else{if("Array"!==e.constructor.name)throw new Error("Incorrect type must be an Array or Object");t.routes=t.routes.concat(e)}return t},remove:function(e){for(var t=this,r=0,o=t.routes.length;r<o;r++){var n=t.routes[r];
if(n.path===e){t.routes.splice(r,1);break}}return t},flush:function(){var e=this;return e.routes=[],e.mode=null,e.root="/",e},check:function(e){for(var t=this,r=e||t.fragment(),o=0,n=t.routes.length;o<n;o++){var a=r.match(t.routes[o].path);if(a){a.shift(),t.routes[o].handler.apply({},a);break}}return t},listen:function(){var e=this;if(e.mode===o)window.onpopstate=function(){console.log("change"),e.resolve()};else if(e.mode===r)window.onhashchange=function(){e.resolve()};else{var t=e.fragment();clearInterval(e.interval),
e.interval=setInterval(function(){t!==e.fragment()&&(t=e.fragment(),e.check(t))},200)}return e},navigate:function(e){var r=this;return e=e?e:"",r.mode===o?history.pushState(null,null,r.root+t(e)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,r}}}();