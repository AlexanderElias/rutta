!function(){"use strict";function t(t){return decodeURI(t).trim().replace(/^\//,"").replace(/\/$/,"").replace(/\?(.*?)$/,"").replace(/\/#\/(.*?)$/,"")}function e(){for(var e="",r="",o=0,n=arguments.length;o<n;o++)r=t(arguments[o]),""!==r&&o!==n-1&&(r+="/"),e+=r;return e}function r(e){e.mode&&e.isHistory?"Number"===e.mode.constructor.name?this.mode=e.mode:"String"===e.mode.constructor.name&&(e.mode=e.mode.toLowerCase(),this.mode="history"===e.mode?n:o):e.isHistory?this.mode=n:this.mode=o,this.root=e.root?t(e.root)+"/":"/",
this.root=this.mode===o?this.root+"#/":this.root,this.name=e.name,this.routes=e.routes||[],this.query=e.query||'[r-view="'+this.name+'"]',this.title=e.title||document.title,this.origin=e.origin||document.location.origin,this.state=e.state||{url:null,title:null}}var o=2,n=3;r.prototype.pushState=function(t){var r=this;r.state.title=t.title,r.state.url=t.url.replace(r.origin,""),r.state.url=e(r.origin,r.root,r.state.url),window.history.pushState(r.state,r.state.title,r.state.url)},r.prototype.popState=function(t){
var e=this;e.state.url=t?t.url:e.root,e.state.title=t?t.title:e.title},r.prototype.currentPath=function(){var e=this,r=null;return r=document.location.href,r=r.replace(document.location.origin,""),r=e.root+t(r)},r.prototype.isOrigin=function(t){return t&&0===t.indexOf(this.origin)},r.prototype.request=function(t){return new function(){this.path=t.path,this.title=t.title}},r.prototype.response=function(t){var e=this;return new function(){this.content=function(r){document.title=t.title,document.querySelector(e.query).innerHTML=r;
}}},r.prototype.route=function(t){var e=this;t=t||e.currentPath();var r=e.routes.length,o=null,n=0;for(n;n<r;n++)if(o=e.routes[n],t===o.path)return o.handler(e.request(o),e.response(o));return e},r.prototype.add=function(t){var e=this;return"Object"===t.constructor.name?e.routes.push(t):"Array"===t.constructor.name&&(e.routes=e.routes.concat(t)),e},r.prototype.remove=function(t){for(var e=this,r=0,o=e.routes.length;r<o;r++){var n=e.routes[r];if(n.path===t){e.routes.splice(r,1);break}}return e},r.prototype.listen=function(){
var t=this;return window.addEventListener("DOMContentLoaded",function(){t.route()},!1),window.addEventListener("click",function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey)){for(var r=e.path?e.path[0]:e.target;r&&"A"!==r.nodeName;)r=r.parentNode;if(r&&"A"===r.nodeName){var o=r.getAttribute("href");r.hasAttribute("download")||"external"===r.getAttribute("rel")||o&&o.indexOf("mailto:")>-1||o&&o.indexOf("tel:")>-1||o&&o.indexOf("file:")>-1||o&&o.indexOf("ftp:")>-1||t.isOrigin(r.href)&&(e.preventDefault(),
t.pushState({title:r.title,url:r.href}),t.route())}}},!1),window.addEventListener(t.mode===n?"popstate":"hashchange",function(e){t.mode===n&&t.popState(e.state),t.route()},!1),t},window.Rutta||(window.Rutta={HASH:o,HISTORY:n,routers:{},router:function(t,e){if(e||"object"!=typeof t?(e=e||{},e.name=t):(e=t,t=null),e.isHistory="history"in window&&"pushState"in window.history,!e.name)throw new Error("Router - name parameter required");if(this.routers[e.name])throw Error("Router - name is already in use");
var o=new r(e);return this.routers[e.name]=o,o}})}();