!function(){"use strict";function t(){return!!("undefined"!=typeof window&&"onhashchange"in window)}function e(t){return t=t.toString(),t=t.trim(),t=t.replace(/\/$/,""),t=t.replace(/^\//,"")}function o(t){var e=location.protocol+"//"+location.hostname;return location.port&&(e+=":"+location.port),t&&0===t.indexOf(e)}var n=2,r=3;window.Rutta={HASH:n,HISTORY:r,root:"/",routes:[],redirects:[],mode:t()?r:n,setup:function(t){var o=this;return t=t||{},t.root&&(o.root="/"+e(t.root)+"/"),t.mode&&("Number"===t.mode.constructor.name?o.mode=t.mode:"String"===t.mode.constructor.name&&(o.mode="history"===t.mode.toLowerCase()?r:n)),
o},path:function(){var t=this,o="",n=null;return t.mode===r?(o=decodeURI(window.location.pathname+window.location.search),o=e(o),o=o.replace(/\?(.*)$/,""),o="/"!==t.root?o.replace(t.root,""):o):(n=window.location.href.match(/#(.*)$/),o=n?n[1]:""),o=e(o),""===o?"/":o},show:function(t){var e=this;t=t||e.path();for(var o=0,n=e.routes.length;o<n;o++){var r=e.routes[o];if(r.path===t){e.view.innerHTML=r.handler();break}}return e},add:function(t){var e=this;return"Object"===t.constructor.name?e.routes.push(t):"Array"===t.constructor.name&&(e.routes=e.routes.concat(t)),
e},remove:function(t){for(var e=this,o=0,n=e.routes.length;o<n;o++){var r=e.routes[o];if(r.path===t){e.routes.splice(o,1);break}}return e},flush:function(){var t=this;return t.routes=[],t.mode=null,t.root="/",t},check:function(t){for(var e=this,o=t||e.path(),n=0,r=e.routes.length;n<r;n++){var a=o.match(e.routes[n].path);if(a){a.shift(),e.routes[n].handler.apply({},a);break}}return e},listen:function(){var t=this;return window.addEventListener("DOMContentLoaded",function(){t.view=document.querySelector("[r-view]"),
t.show(window.location.pathname)},!1),window.addEventListener("click",function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var r=e.path?e.path[0]:e.target;r&&"A"!==r.nodeName;)r=r.parentNode;if(r&&"A"===r.nodeName){var a=r.href.replace(window.location.origin+t.root,""),i=r.getAttribute("href");r.hasAttribute("download")||"external"===r.getAttribute("rel")||(!t.mode!==n||r.pathname!==location.pathname||!r.hash&&"#"!==i)&&(i&&i.indexOf("mailto:")>-1||i&&i.indexOf("tel:")>-1||i&&i.indexOf("file:")>-1||i&&i.indexOf("ftp:")>-1||r.target||o(r.href)&&window.location.pathname!=="/"+a&&(e.preventDefault(),
t.navigate(a)))}}},!1),t.mode===r?window.addEventListener("popstate",function(){t.show()},!1):t.mode===n&&window.addEventListener("hashchange",function(){t.show()},!1),t},navigate:function(t){var o=this;return t=t?t:"",o.mode===r?window.history.pushState(null,null,o.root+e(t)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t,o.show(),o}}}();